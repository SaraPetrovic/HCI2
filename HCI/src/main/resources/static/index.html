<!DOCTYPE html>
<html lang="en">
<head>
  <title>Računarski centar</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="nav.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/1000hz-bootstrap-validator/0.9.0/validator.js"></script>
  <script src="dataTable.js" charset="UTF-8"></script>
  <script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap.min.js" ></script>
   
  <script type="text/javascript" src="multiselect-lib/multiselect.js"></script>
  <link rel="stylesheet" href="multiselect-lib/multiselect.css" type="text/css"/>

  <link href="https://cdn.jsdelivr.net/sweetalert2/6.4.1/sweetalert2.css" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/sweetalert2/6.4.1/sweetalert2.js"></script>

  <script src="zoomInZoomOut.js"></script>
  
 
  <style>
    table span{
      display:block;
      background-color: #09C;
      height: 100%;
      width: 100%;
      }
    body {
    	font-size: 17px;
	}
    ::placeholder {
      color: red;
      opacity: 1; /* Firefox */
   
	}
	textarea {
    resize: none;
	}
  </style>
  
</head>
 
<body>
 
<div id="main" ondblclick="zoomin()">
	
 <div class="jumbotron text-center" style="height=70%;">
   <h1>Dоbrodošli u Računarski Centar</h1>
   <p><h2>Fakultet tehničkih nauka</h2></p>
</div>
 
<div id="mySidenav" class="sidenav">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
  <a data-toggle="modal" data-target="#predmet" onclick="changePredmetButtonText()" href="#">Dodaj predmet</a>
  <a data-toggle="modal" data-target="#ucionica" onclick="changeUcionicaButtonText()" href="#">Dodaj učionicu</a>
  <a data-toggle="modal" data-target="#smer" onclick="changeSmerButtonText()" href="#">Dodaj smer</a>
  <a data-toggle="modal" data-target="#softver" onclick="changeSoftverButtonText()" href="#">Dodaj softver</a>
  <a href="raspored.html">Rasporedi</a>
  <a id="pomoc" href="pomoc.html" target="_blank">Pomoć</a>
</div>
 
<div class="container">
<!-- Modal -->
<div id="predmet" class="modal fade" role="dialog">
  <div class="modal-dialog">
 
    <!-- Modal content-->
    <div class="modal-content">
    <div class="modal-header">
    	<button type="button" class="close" data-dismiss="modal">&times;</button>
        <div id="predmetHeader"><h3 class="modal-title">Dodavanje novog predmeta</h3></div>
    </div>
    <div class="row centered-form">
        <div class="col-xs-12 col-sm-12 col-md-12 ">
          <div class="panel panel-default">
              <div class="panel-heading">

              <form id="predmetForm" method="POST" autocomplete="off" class="form-vertical" >
                <div class="row">
                <div class="form-group">
                  <div class="col-xs-12 col-sm-12 col-md-12">
                    <label for="naziv">Naziv predmeta:</label>
                    <input type="text" class="form-control" id="nazivPredmeta" name="nazivPredmeta" data-error="Molim Vas unesite naziv predmeta" placeholder="Unesite naziv predmeta" required>
                    <div class="help-block with-errors"></div>
                  </div>
                </div></div>
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-12">
                    <div class="form-group">
                    <label for="oznaka">Oznaka predmeta:</label>
                    <input type="text" class="form-control" id="oznakaPredmeta" name="oznakaPredmeta" data-error="Molim Vas unesite oznaku predmeta" placeholder="Unesite oznaku (skracenicu) predmeta" required>
                    <div class="help-block with-errors"></div>
                  </div>
                </div></div>
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-12">
                  <div class="form-group">
                    <b>Izaberite smer</b>
                    <select class="form-control" id="smerSelect" required>
                        <option value=""></option>
                    </select>
                </div></div></div>
                <div class="row">
                  <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group">
                      <label for="opis">Opis predmeta:</label>
                      <textarea rows="3" cols="50" class="form-control" id="opisPredmeta" name="opisPredmeta" placeholder="Opis nije neophodan"></textarea>
                    </div>
                  </div>
                  <div class="col-xs-6 col-sm-6 col-md-6">
                     <div class="form-group">
                       <label for="velicinaGrupe">Broj studenata:</label>
                       <input type="number" min="1" max="50" class="form-control input-sm" id="velicinaGrupe" name="velicinaGrupe" data-error="Molim Vas unesite broj studenata (od 1 do 50)" placeholder="Unesite broj studenata za jednu grupu" required>
                     <div class="help-block with-errors"></div>
                 </div></div>
                </div>
               <div class="row">
                <div class="col-xs-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <label for="brojCasova">Broj nedeljnih termina: </label>
                    <input type="number" min="1" max="50" class="form-control input-sm" id="brojTermina" name="brojTermina" data-error="Molim Vas unesite broj termina (od 1 do 50)" placeholder="Unesite broj termina na nedeljnom nivou" required>
                  <div class="help-block with-errors"></div>
                </div></div>
                <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group">
                        <label for="velicinaGrupe">Broj casova po terminu:</label>
                        <input type="number" min="1" max="10" class="form-control input-sm" id="duzinaTermina" name="duzinaTermina" data-error="Molim Vas unesite broj časova (od 1 do 50)" placeholder="Unesite broj časova od 45 min za termin" required>
                    <div class="help-block with-errors"></div>
                </div>
              </div></div>
              
              <div class="row">
                  <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group" >
                      <label for="softveriLab">Potreban softver: </label>
                      <div>
                          <span class="multiselect-native-select">
                            <select id="softveri-predmet" multiple="multiple" class="form-control" data-error="Molim Vas izaberite softver" required>
                               
                            </select>
                        </span>
                         <div class="help-block with-errors"></div>
                      </div>
                    </div>
                </div>
              </div>
              
                <div class="row">
                	<label style="padding-left:15px;"for="Neophodnost">Hardver u učionici nephodan za izvođenje nastave:</label>
                </div>
                <div class="row">
                	<div class="form-group">
                	<div class="col-xs-4 col-sm-4 col-md-4">
                		 <div class="checkbox">
                		 	<label><input id="projektorPredmet" title="Označiti ako je projektor neophodan za održavanje nastave" type="checkbox"> Projektor</label>
                		 </div>
                	</div>
                	<div class="col-xs-4 col-sm-4 col-md-4">
                		 <div class="checkbox">
							<label><input id="tablaPredmet" title="Označiti ako je tabla neophodana za održavanje nastave" type="checkbox">Tabla</label>
                		 </div>
                	</div>
                	<div class="col-xs-4 col-sm-4 col-md-4">
                		 <div class="checkbox">
		                    <label><input id="pametnaTablaPredmet" title="Označiti ako je pametna tabla neophodana za održavanje nastave" type="checkbox">Pametna tabla</label>
                		 </div>
                	</div> 
                </div>    	
                </div>
                <div class="row">
		            <label style="padding-left:15px; padding-bottom:8px; padding-top:4px">Operativni sistem:</label>
		        </div>
		        
		        <div class="form-group">        
                <div class="row">

                	<div class="col-xs-4 col-sm-4 col-md-4">
                		<label style="font-weight: normal;"><input name="os" type="radio" id="linuxPredmet" title="Označiti ako u učionici postoji Linux OS" value="linux" checked> Linux</label>		                		
                	</div>
                	<div class="col-xs-4 col-sm-4 col-md-4">
                		<label style="font-weight: normal;"><input name="os" id="windowsPredmet" title="Označiti ako u učionici postoji Windows OS" type="radio" value="windows" > Windows</label>      
                	</div>
                	<div class="col-xs-4 col-sm-4 col-md-4">
                		<label style="font-weight: normal;"><input name="os" id="obaOsPredmet" title="Označiti ako u učionici postoje i Linux i Windows OS" type="radio" value="oba" > Linux i Windows</label>
                	</div>
                	<div style="padding-left:15px;" class="help-block">Molim Vas označite operativni sistem koji učionica sadrži</div>
                </div></div>
                <div class="row">
                	
                	<div class="modal-footer">
                    	<button id="predmetSubmit" type="submit" class="btn btn-primary btn-lg">Dodaj predmet</button>
                 </div></div>

              </form>
          </div>
      </div>
    </div>
  </div></div></div></div>
<!-- Modal -->
<div id="ucionica" class="modal fade" role="dialog">
  <div class="modal-dialog">
 
    <!-- Modal content-->
      <div class="modal-content">
      <div class="modal-header">
    	<button type="button" class="close" data-dismiss="modal">&times;</button>
        <div id="ucionicaHeader"><h3 class="modal-title">Dodavanje učionice</h3></div>
      </div>
          <div class="row centered-form">
              <div class="col-xs-12 col-sm-12 col-md-12 ">
                <div class="panel panel-default">
                    <div class="panel-heading">
                    <form id="ucionicaForm" method="post" class="form-vertical" autocomplete="off">
                      <div class="row">
                          <div class="col-xs-12 col-sm-12 col-md-12">
                            <div class="form-group">
                              <label for="oznakaUcionice">Oznaka učionice:</label>
                              <input type="text" class="form-control" id="oznakaUcionice" data-error="Molim Vas unesite oznaku učionice" placeholder="Unesite oznaku učionice" required>
                              <div class="help-block with-errors"></div>
                            </div>
                        </div></div>
                        <div class="row">
                          <div class="col-xs-12 col-sm-12 col-md-12">
                              <div class="form-group">
                                <label for="opisUcionice">Opis učionice:</label>
                                <textarea rows="4" cols="50" class="form-control" id="opisUcionice" placeholder="Unesite značajne karakteristike učionice"></textarea>
                        </div></div></div>
                        <div class="row">
                          <div class="col-xs-6 col-sm-6 col-md-6">
                            <div class="form-group">
                              <label for="brojMesta">Broj mesta: </label>
                              <input type="number" min="1" max="100" class="form-control input-sm" id="brojMesta" data-error="Molim Vas unesite broj mesta (od 1 do 100)" placeholder="Unesite broj mesta u učionici" required>
                              <div class="help-block with-errors"></div>
                          	</div>
                          </div></div>
                          <div class="row">
                          <div class="col-xs-6 col-sm-6 col-md-6">
                            <div class="form-group">
                              <label for="softveriUcionica">Softveri u učionici: </label>
                              <div>
                                  <span class="multiselect-native-select">
                                    <select id="softveri-ucionica" multiple="multiple" class="form-control" data-error="Molim Vas izaberite softver" required>
                                       
                                    </select>
                                  </span>
                                  <div class="help-block with-errors"></div>
                              </div>
                            </div>
                        </div></div>
                        
		                <div class="row">
		                	<label style="padding-left:15px;"for="Neophodnost">Opremljenost učionice:</label>
		                </div>
		                <div class="row">
		                	
		                	<div class="col-xs-4 col-sm-4 col-md-4">
		                		 <div class="checkbox">
		                		 	<label><input id="projektorUcionica" title="Označiti ako učionica poseduje projektor" type="checkbox"> Projektor</label>
		                		 </div>
		                	</div>
		                	<div class="col-xs-4 col-sm-4 col-md-4">
		                		 <div class="checkbox">
									<label><input id="tablaUcionica" title="Označiti ako učionica poseduje tablu" type="checkbox">Tabla</label>
		                		 </div>
		                	</div>
		                	<div class="col-xs-4 col-sm-4 col-md-4">
		                		 <div class="checkbox">
				                    <label><input id="pametnaTablaUcionica" title="Označiti ako učionica poseduje pametnu tablu" type="checkbox">Pametna tabla</label>
		                		 </div>
		                	</div>
		                	
		                </div>
		                
		                <div class="row">
		                	<label style="padding-left:15px;">Operativni sistem:</label>
		                </div>
		                
		                <div class="row">
		                	<div class="col-xs-4 col-sm-4 col-md-4">
		                		<label style="font-weight: normal;"><input name="os" type="radio" id="linuxUcionica" title="Označiti ako u učionici postoji Linux OS" value="linux" checked> Linux</label>		                		
		                	</div>
		                	<div class="col-xs-4 col-sm-4 col-md-4">
		                		<label style="font-weight: normal;"><input name="os" id="windowsUcionica" title="Označiti ako u učionici postoji Windows OS" type="radio" value="windows" > Windows</label>      
		                	</div>
		                	<div class="col-xs-4 col-sm-4 col-md-4">
		                		<label style="font-weight: normal;"><input name="os" id="obaUcionica" title="Označiti ako u učionici postoje i Linux i Windows OS" type="radio" value="oba" > Linux i Windows</label>
		                	</div>
		                	<div style="padding-left:15px; padding-bottom:8px; padding-top:4px" class="help-block">Molim Vas označite operativni sistem koji učionica sadrži</div>
		                </div>
                    
                        
                        <div class="row">
                            <div class="col-xs-12 col-sm-12 col-md-12">
                            <div class="modal-footer">
                              <button id="ucionicaSubmit" type="submit" class="btn btn-primary btn-lg">Dodaj učionicu</button>
                        </div></div></div>
                      </form>
                    </div>
                </div>
              </div>
            </div></div></div></div>
         
 
<!-- Modal -->
<div id="smer" class="modal fade" role="dialog">
    <div class="modal-dialog">
 
       <!-- Modal content-->
       <div class="modal-content">
       		<div class="modal-header">
    			<button type="button" class="close" data-dismiss="modal">&times;</button>
        		<div id="smerHeader"><h3 class="modal-title">Dodavanje smera</h3></div>
    		</div>
          <div class="container">
              <form id="smerForm" method="post" class="form-vertical" autocomplete="off">
                <div class="row">
                <div class="form-group">
                  <div class="col-xs-6 col-sm-6 col-md-6">
                    <label for="nazivSmera"><br>Naziv smera:</label>
                    <input type="text" class="form-control" id="nazivSmera" data-error="Molim Vas unesite naziv smera" placeholder="Unesite naziv smera" required>
                    <div class="help-block with-errors"></div>
                  </div>
                </div></div>
                <div class="row">
                  <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group">
                    <label for="oznakaSmera">Oznaka smera:</label>
                    <input type="text" class="form-control" id="oznakaSmera" data-error="Molim Vas unesite oznaku smera" placeholder="Unesite oznaku (skracenicu) smera" required>
                    <div class="help-block with-errors"></div>
                  </div>
                </div></div>
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6">
                      <div class="form-group">
                      <label for="datumSmera">Datum osnivanja:</label>
                      <input type="date" min="1900-01-01" max="2019-01-01" class="form-control" name="datumSmeraId" id="datumSmeraId" data-error="Molim Vas unesite datum osnivanja smera (nakon 1.1.1900.)" placeholder="Unesite datum kada je smer osnovan" required>
                      <div class="help-block with-errors"></div>
                    </div>
                  </div></div>
                <div class="row">
                  <div class="col-xs-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <label for="opisSmera">Opis smera:</label>
                    <textarea rows="4" cols="50" class="form-control" id="opisSmera" placeholder="Unesite znacajne karakteristike smera"></textarea>
                  </div></div></div>
              <div class="row">
                <div class="col-xs-6 col-sm-6 col-md-6">
                <div class="modal-footer">
                  <button type="submit" id="smerSubmit" class="btn btn-primary btn-lg">Dodaj smer</button>
              </div></div></div>
          </form>
        </div>
      </div>
    </div>
  </div>
       
 
<!-- Modal -->
<div id="softver" class="modal fade" role="dialog">
    <div class="modal-dialog">
 
       <!-- Modal content-->
       <div class="modal-content">
	       <div class="modal-header">
	    		<button type="button" class="close" data-dismiss="modal">&times;</button>
	        	<div id="softverHeader"><h3 class="modal-title">Dodavanje novog softvera</h3></div>
	       </div>
          <div class="row centered-form">
            <div class="col-xs-12 col-sm-12 col-md-12 ">
             <div class="panel panel-default">
             <div class="panel-heading">
              <form id="softverForm" method="post" class="form-vertical" autocomplete="off">
                <div class="row">
                <div class="form-group">
                  <div class="col-xs-12 col-sm-12 col-md-12">
                    <label for="nazivSmera"><br>Naziv softvera:</label>
                    <input type="text" class="form-control" id="nazivSoftvera" data-error="Molim Vas unesite naziv softvera" placeholder="Unesite naziv softvera" required>
                    <div class="help-block with-errors"></div>
                  </div>
                </div></div>
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-12">
                    <div class="form-group">
                    <label for="oznakaSmera">Oznaka softvera:</label>
                    <input type="text" class="form-control" id="oznakaSoftvera" data-error="Molim Vas unesite oznaku softvera" placeholder="Unesite oznaku (skraćenicu) softvera" required>
                    <div class="help-block with-errors"></div>
                  </div>
                </div></div>
                <div class="row">
                  <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group">
                        <label for="datumSmera">Godina izdavanja:</label>
                        <input type="number" min="1950" max="2019" class="form-control" id="datumIzdavanja"  data-error="Molim Vas unesite godinu izdavanja softvera (od 1950.)" placeholder="Unesite godinu kada je softver izdat" required>
                        <div class="help-block with-errors"></div>
                    </div>
                  </div>
                  <div class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group">
                        <label for="oznakaSmera">Cena softvera:</label>
                        <input type="number" min="0" max="99999999" class="form-control" id="cenaSoftvera" data-error="Molim Vas unesite cenu softvera" placeholder="Unesite cenu softvera" required>
                        <div class="help-block with-errors"></div>
                    </div>
                  </div>
                  </div>
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-12">
                    <div class="form-group">
                    <label for="oznakaSmera">Proizvođač softvera:</label>
                    <input type="text" class="form-control" id="proizvodjacSoftvera" data-error="Molim Vas unesite proizvođača softvera" placeholder="Unesite proizvođača softvera" required>
                    <div class="help-block with-errors"></div>
                  </div>
                </div></div>
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-12">
                    <div class="form-group">
                    <label for="oznakaSmera">Sajt softvera:</label>
                    <input type="text" class="form-control" id="sajtSoftvera" data-error="Molim Vas unesite sajt softvera" placeholder="Unesite sajt softvera" required>
                    <div class="help-block with-errors"></div>
                  </div>
                </div></div>
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-12">
                  <div class="form-group">
                    <label for="opisSmera">Opis softvera:</label>
                    <textarea rows="4" cols="50" class="form-control" id="opisSoftvera" placeholder="Unesite opis softvera (nije neophodno)"></textarea>
                </div></div></div>
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-12">
                  <div class="modal-footer">
                    <button type="submit" id="softverSubmit" class="btn btn-primary btn-lg">Dodaj softver</button>
              </div></div></div>
          </form>
        </div>
      </div>
      </div>
    </div>
  </div>
</div></div>
 
</div>
 
<script type="text/javascript">
	
	<!-- MULTISELECT ZA FORME (softver; forma DodajPredmet) -->
    $(document).ready(function() {
        $('#softveri-predmet').multiselect({
            enableFiltering: true,
            includeSelectAllOption: true,
            maxHeight: 200
        });
    });
    
    <!-- ISPRAZNI FORME NAKON CLOSE i DESTROY VALIDATOR! -->
    $('.modal').on('hidden.bs.modal', function(){
        $(this).find('form')[0].reset();
        
    });
    
</script>
 
 
<script>
function changePredmetButtonText(){
	$("#predmetSubmit").text("Dodaj predmet");
	$("#predmetHeader").text("Dodavanje novog predmeta");
}
function changeSmerButtonText(){
	$("#smerSubmit").text("Dodaj smer");
	$("#smertHeader").text("Dodavanje novog smera");
}
function changeUcionicaButtonText(){
	$("#ucionicaSubmit").text("Dodaj ucionicu");
	$("#ucionicaHeader").text("Dodavanje nove ucionice");
}
function changeSoftverButtonText(){
	$("#softverSubmit").text("Dodaj softver");
	$("#softverHeader").text("Dodavanje novog softvera");
}

function ucitajSmerove(){
	$("#smerSelect").empty();
    $.ajax({
        type: "GET",
        url: "/api/smerovi",
        success: function(smerovi){
            
            var selectSmer = document.getElementById("smerSelect");
            $.each(smerovi, function(i, smer){
                var optionSmer = document.createElement("OPTION");
                selectSmer.add(optionSmer);
                optionSmer.value = smer.oznaka;
                optionSmer.text = smer.naziv;
            });
        }
    });
}
 
function ucitajSoftvere(){
    $.ajax({
        type: "GET",
        url: "/api/softveri",
        success: function(softveri){
            $("#softveri-predmet").empty();
            $("#softveri-ucionica").empty();
     
            $.each(softveri, function(i, softver){
                $("#softveri-predmet").append($("<option>",{
                    value: softver.oznaka,
                    text: softver.naziv
                  }));
                $("#softveri-ucionica").append($("<option>",{
                	value: softver.oznaka,
                	text: softver.naziv
                }));
               });
            $("#softveri-predmet").multiselect('rebuild');
            $("#softveri-ucionica").multiselect('rebuild');
        }
    });
}

$(document).ready(function(){
	ucitajSoftvere();
	ucitajSmerove();
});

<!-- SUBMIT Forme za dodavanje softvera -->

$('#softver').on('shown.bs.modal', function (e) {
		$(this).find('form').validator();
		
		$('#softverForm').on('submit', function (e) {
		    if (e.isDefaultPrevented()) {
		    	// ako je forma invalid
		    } else {
		      prikupiSoftver();
		      e.preventDefault() // if you're using AJAX
		    }
		  })
		$('#softver').on('hidden.bs.modal', function (e) {
			$(this).find('form').off('submit').validator('destroy');
		})
});


function prikupiSoftver() {
	var softver = {};
    softver.naziv = $("#nazivSoftvera").val();
    softver.oznaka = $("#oznakaSoftvera").val();
    softver.proizvodjac = $("#proizvodjacSoftvera").val();
    softver.opis = $("#opisSoftvera").val();
    softver.sajt = $("#sajtSoftvera").val();
    softver.godinaIzdavanja = $("#datumIzdavanja").val();
    softver.cena = $("#cenaSoftvera").val();
    
    if($("#softverSubmit").text() == "Dodaj softver"){
    	$.ajax({
            type: "POST",
            contentType: 'application/json',
            url: "/api/dodajSoftver",
            data: JSON.stringify(softver),
            success:function(responce){
            	 $("#softver").modal("hide");
                uspesnoSwal("Softver uspešno dodat!");
            },
            error: function(err){
                neuspesnoSwal("Softver sa ovom oznakom već postoji!");
            },
            processData: false,
      });
    }else{
    	softver.id = softver_global_id;
    	$.ajax({
            type: "POST",
            contentType: 'application/json',
            url: "/api/izmeniSoftver",
            data: JSON.stringify(softver),
            success:function(responce){
                uspesnoSwal("Softver uspešno izmenjen!");
            },
            error: function(err){
                neuspesnoSwal("Softver sa ovom oznakom već postoji!");
            },
            processData: false,
      });
    }
    
    
}	 

<!-- SUBMIT Forme za dodavanje ucionice -->

$('#ucionica').on('shown.bs.modal', function (e) {
		$(this).find('form').validator();
		
		$('#ucionicaForm').on('submit', function (e) {
		    if (e.isDefaultPrevented()) {
		      	// ako su podaci invalid
		    } else {
		      prikupiUcionica();
		      e.preventDefault() // if you're using AJAX
		    }
		  })
		$('#ucionica').on('hidden.bs.modal', function (e) {
			$(this).find('form').off('submit').validator('destroy');
		})
});

function prikupiUcionica() {
	var ucionica = {};
    ucionica.oznaka = $("#oznakaUcionice").val();
    ucionica.opis = $("#opisUcionice").val();
    ucionica.brojMesta = $("#brojMesta").val();
    ucionica.projektor = $('#projektorUcionica:checked').val()?true:false;
    ucionica.tabla = $('#tablaUcionica:checked').val()?true:false;
    ucionica.pametnaTabla = $('#pametnaTablaUcionica:checked').val()?true:false;
   
    var lin = $('#linuxUcionica:checked').val()?true:false;
    if(lin){
        ucionica.opSistem = 'LINUX';
    }
    var win = $('#windowsUcionica:checked').val()?true:false;
    if(win){
        ucionica.opSistem = 'WINDOWS';
    }
    var winlin = $('#obaUcionica:checked').val()?true:false;
    if(winlin){
        ucionica.opSistem = 'WINLINUX';
    }
    
    var softwares = $("#softveri-ucionica option:selected");
    var selectedSoftware = [];
    $(softwares).each(function(index, s) {
      	selectedSoftware.push($(this).val());
    });
    ucionica["softveri"] = [];
    var temp = [];
    
    for (i = 0; i < selectedSoftware.length; i++) {
    	var s = {"oznaka" : selectedSoftware[i]};
    	temp.push(s);
    }
    ucionica["softveri"] = temp;
    
    if($("#ucionicaSubmit").text() == "Dodaj ucionicu"){
    	$.ajax({
            type: "POST",
            contentType: 'application/json',
            url: "/api/dodajUcionicu",
            data: JSON.stringify(ucionica),
            success:function(responce){
            	$("#ucionica").modal("hide");
                uspesnoSwal("Uspešno dodavanje učionice!");
            },
            error: function(err){
                neuspesnoSwal("Učionica sa ovom oznakom već postoji!");
            },
            processData: false,
      	});
    }else{
    	ucionica.id = ucionica_global_id;
    	$.ajax({
            type: "POST",
            contentType: 'application/json',
            url: "/api/izmeniUcionicu",
            data: JSON.stringify(ucionica),
            success:function(responce){
                uspesnoSwal("Uspešna izmena učionice!");
            },
            error: function(err){
                neuspesnoSwal("Učionica sa ovom oznakom već postoji!");
            },
            processData: false,
      	});
    }
    
}

var dodajPredmet = 0;
<!-- SUBMIT Forme za dodavanje predmeta -->

    $('#predmet').on('shown.bs.modal', function (e) {
  		$(this).find('form').validator();
  		
  		$('#predmetForm').on('submit', function (e) {
  		    if (e.isDefaultPrevented()) {
  		      	// ako su podaci invalid
  		    } else {
  		  		prikupiPredmet();
  		  			
	            e.preventDefault() // if you're using AJAX
  		    }
  		  })
  		$('#predmet').on('hidden.bs.modal', function (e) {
    		$(this).find('form').off('submit').validator('destroy');
  		})
    });


function prikupiPredmet() {
    var predmet = {};
    predmet.naziv = $("#nazivPredmeta").val();
    predmet.oznaka = $("#oznakaPredmeta").val();
    predmet.opis = $("#opisPredmeta").val();
    predmet.velicinaGrupe = $("#velicinaGrupe").val();
    predmet.duzinaTermina = $("#duzinaTermina").val();
    predmet.brojTermina = $("#brojTermina").val();
    predmet.projektor = $('#projektorPredmet:checked').val()?true:false;
    predmet.tabla = $('#tablaPredmet:checked').val()?true:false;
    predmet.pametnaTabla = $('#pametnaTablaPredmet:checked').val()?true:false;

    var linux = $('#linuxPredmet:checked').val()?true:false;
    var windows = $('#windowsPredmet:checked').val()?true:false;
    var winlinux = $('#obaOsPredmet:checked').val()?true:false;
    if(linux){
        predmet.opSistem = 'LINUX';
    }
    else if(windows){
        predmet.opSistem = 'WINDOWS';
    }
    else if(winlinux){
        predmet.opSistem = 'WINLINUX';
    }
    else{
        predmet.opSistem = '';
    }
    var smer = {"oznaka" : $("#smerSelect").val()};
    predmet["smer"] = {};
    predmet["smer"] = smer;
    
    var softwares = $("#softveri-predmet option:selected");
    var selectedSoftware = [];
    $(softwares).each(function(index, s) {
      	selectedSoftware.push($(this).val());
    });
    predmet["softveri"] = [];
    var temp = [];
    
    for (i = 0; i < selectedSoftware.length; i++) {
    	var s = {"oznaka" : selectedSoftware[i]};
    	temp.push(s);
    }
    predmet["softveri"] = temp;
    
    if($("#predmetSubmit").text() == "Dodaj predmet"){
    	$.ajax({
            type: "POST",
            contentType: 'application/json',
            url: "/api/dodajPredmet",
            data: JSON.stringify(predmet),
            success:function(responce){
            	$("#predmet").modal("hide");
                uspesnoSwal("Uspešno dodavanje predmeta!");
            },
            error: function(err){
                neuspesnoSwal("Predmet sa ovom oznakom već postoji!");
            },
            processData: false,
       });
    }else{
    	var stariPredmetId = $("#izmeniPredmet" + predmet_global_id).val();
        predmet.id = stariPredmetId;
    	$.ajax({
            type: "POST",
            contentType: 'application/json',
            url: "/api/izmenaPredmeta",
            data: JSON.stringify(predmet),
            success:function(responce){
                uspesnoSwal("Uspešno izmenjen predmet!");
            },
            error: function(err){
                neuspesnoSwal("Predmet sa ovom oznakom već postoji!");
            },
            processData: false,
       });
    }
    
}

<!-- SUBMIT ZA DODAVANJE SMERA -->
		$('#smer').on('shown.bs.modal', function (e) {
			$(this).find('form').validator();
			
			$('#smerForm').on('submit', function (e) {
			    if (e.isDefaultPrevented()) {
			      	// ako su podaci invalid
			    } else {
			      prikupiSmer();
			     
			      e.preventDefault() // if you're using AJAX
			    }
			  })
			$('#smer').on('hidden.bs.modal', function (e) {
				$(this).find('form').off('submit').validator('destroy');
			})
		});


function prikupiSmer() {
	 var smer = {};
     smer.naziv = $("#nazivSmera").val();
     smer.oznaka = $("#oznakaSmera").val();
     smer.datum = $("#datumSmeraId").val();
     smer.opis = $("#opisSmera").val();
     
     if($("#smerSubmit").text() == "Dodaj smer"){
    	 $.ajax({
             type: "POST",
             contentType: 'application/json',
             url: "/api/dodajSmer",
             data: JSON.stringify(smer),
             success:function(responce){
                 uspesnoSwal("Uspešno dodavanje smera!");
                 $("#smer").modal("hide");
             },
             error: function(err){
                 neuspesnoSwal("Smer sa ovom oznakom već postoji!");
                 
             },
             processData: false,
         });
     }
     else{
    	 smer.id = smer_global_id; 
    	 $.ajax({
             type: "POST",
             contentType: 'application/json',
             url: "/api/izmeniSmer",
             data: JSON.stringify(smer),
             success:function(responce){
                 uspesnoSwal("Uspešna izmena smera!");
             },
             error: function(err){
                 neuspesnoSwal("Smer sa ovom oznakom već postoji!");
             },
             processData: false,
         });
     }
}


<!-- SWAL za success -->
function uspesnoSwal(poruka){
		swal({
			  type: 'success',
			  title: 'Uspešno!',
			  text: poruka
		}).then(function(){ 
		       location.reload();
		   });
}

<!-- SWAL za unseccess -->
function neuspesnoSwal(poruka){
	swal({
		  type: 'error',
		  title: 'Greška!',
		  text: poruka,
		  
		})
}
</script>
 
 
 
<!-- Nav meni --> 
<div class="container">

	<div class="row">
	    <span id="meniBtn" style="font-size:45px;cursor:pointer" onclick="openNav()">&#9776; Meni</span> 
		<div style="font-size:30px;margin-right:0px;margin-left: 62%;">
			
		    <button id="buttonZoomout" type="button" class="btn btn-default btn-lg" onclick="zoomout()" >
		      <span class="glyphicon glyphicon-zoom-out"></span> Zoom-out
		    </button>
		    <button id="buttonZoomin" type="button" class="btn btn-default btn-lg" onclick="zoomin()">
		      <span class="glyphicon glyphicon-zoom-in"></span> Zoom-in
		    </button>
		</div>
  </div>
 </div>
<!-- Container entiteti --> 
<div id="container" class="container"style="margin-top:5%;margin-bottom:100px;" ondblclick="zoomin()">
 
  <h2><b>Entiteti</b></h2>
  <ul class="nav nav-tabs" style="margin-bottom:20px;">
    <li class="active"><a data-toggle="tab" href="#home">Predmeti</a></li>
    <li><a data-toggle="tab" href="#menu1">Smerovi</a></li>
    <li><a data-toggle="tab" href="#menu2">Učionice</a></li>
    <li><a data-toggle="tab" href="#menu3">Softveri</a></li>
  </ul>
 
  <div class="tab-content">
    <div id="home" class="tab-pane fade in active">
      <table id="predmeti" class="table table-striped table-bordered" style="width:100%">
        <thead>
            <tr>

                <th >Oznaka<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Naziv<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Opis<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Smer<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Veličina Grupe<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>OP sistem<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Broj termina<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Dužina termina<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Projektor<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Tabla<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Pametna tabla<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Softver</th>
                <th> </th>
                             
            </tr>
        </thead>
        <tbody id="tableBodyPredmeti">
           
        </tbody>
        <tfoot>
            <tr>
                <th>Oznaka</th>
                <th>Naziv</th>
                <th>Opis</th>
                <th>Smer</th>
                <th>Veličina Grupe</th>
                <th>OP sistem</th>
                <th>Broj termina</th>
                <th>Dužina termina</th>
                <th>Projektor</th>
                <th>Tabla</th>
                <th>Pametna tabla</th>
                <th>Softver</th>
                <th> </th>
                
            </tr>
        </tfoot>
    </table>
    </div>
    <div id="menu1" class="tab-pane fade">
     <table id="smerovi" class="table table-striped table-bordered" style="width:100%;margin-top:20px">
        <thead>
            <tr>
                <th>Oznaka<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Naziv<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Datum<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Opis<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
   				<th> </th>
            </tr>
        </thead>
        <tbody id="tableBodySmerovi">
 
        </tbody>
        <tfoot>
            <tr>
                <th>Oznaka</th>
                <th>Naziv</th>
                <th>Datum</th>
                <th>Opis</th>
                <th> </th>
            </tr>
        </tfoot>
    </table>
    </div>
    <div id="menu2" class="tab-pane fade" >
      <table id="ucionice" class="table table-striped table-bordered" style="width:100%;margin-top:20px">
        <thead>
            <tr>

                <th>Oznaka<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Opis<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Broj mesta<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Projektor<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Tabla<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Pametna tabla<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Operativni Sistem<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
				<th>Softver</th>
				<th> </th>
            
             
   
            </tr>
        </thead>
        <tbody id="tableBodyUcionice">
 
        </tbody>
        <tfoot>
            <tr>
              <th>Oznaka</th>
                <th>Opis</th>
                <th>Broj mesta</th>
                <th>Projektor</th>
                <th>Tabla</th>
                <th>Pametna tabla</th>
                <th>Operativni Sistem</th>
                <th>Softver</th>
                <th> <th>
            </tr>
        </tfoot>
    </table>
    </div>
    <div id="menu3" class="tab-pane fade" >
             <table id="softveri" class="table table-striped table-bordered" style="width:100%;margin-top:20px">
        <thead>
            <tr>
                <th>Oznaka<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Naziv<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Proizvođač<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Sajt<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Godina izadavanja<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Opis<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
                <th>Cena (din)<span class="glyphicon glyphicon-sort" style="background-color:white;color:grey;display:inline;margin-left:5px;"></span></th>
             	<th> </th>
   
            </tr>
        </thead>
        <tbody id="tableBodySoftveri">
 
        </tbody>
        <tfoot>
            <tr>
                <th>Oznaka</th>
                <th>Naziv</th>
                <th>Proizvođač</th>
                <th>Sajt</th>
                <th>Godina izadavanja</th>
                <th>Opis</th>
                <th>Cena (din)</th>
                <th> </th>
            </tr>
        </tfoot>
    </table>
  </div>
</div>
</div>
 
</div>
 
 
 
 
<!-- SIDE NAV -->
<script>
  function openNav() {
      document.getElementById("mySidenav").style.width = "250px";
      document.getElementById("main").style.marginLeft = "250px";
      document.getElementById("meniBtn").style.visibility = "hidden";
      //document.body.style.backgroundColor = "rgba(0,0,0,0.4)";
  }
 
  function closeNav() {
      document.getElementById("mySidenav").style.width = "0";
      document.getElementById("main").style.marginLeft= "0";
      document.getElementById("meniBtn").style.visibility = "visible";
      //document.body.style.backgroundColor = "white";
  }
</script>
</body>

<!-- AJAX pozivi za popunjavanje tabele entiteta -->
<script>
$.ajax({
    contentType: 'application/json',
    dataType: 'json',
    success: function(predmeti){
               
              predmeti.forEach(function(predmet) {
	            	// formatiraj softvere
	                  var softs = predmet.softveri;
	                  var temp = "";
	                  var temp2 = "";
	                  if (softs.length > 0) {
	                  	 softs.forEach(function(softver) {
	                  		 temp = temp + softver.naziv + ", ";
	                  		temp2 = temp2 + softver.oznaka + ", ";
	                  	 })       
	                  }
	                
                   var softveri = temp.substring(0, temp.length-2);
                   var softveri2 = temp2.substring(0, temp2.length-2);
                    var tableData = '';
                    tableData += '<tr>';
                    tableData += '<td>'+ predmet.oznaka +'</td>';
                    tableData += '<td>' + predmet.naziv + '</td>';
                    tableData += '<td>' + predmet.opis + '</td>';
                    tableData += '<td>' + predmet.smer.oznaka + '</td>';
                    tableData += '<td>' + predmet.velicinaGrupe + '</td>';
                    tableData += '<td>' + predmet.opSistem + '</td>';
                    tableData += '<td>' + predmet.brojTermina + '</td>';
                    tableData += '<td>' + predmet.duzinaTermina + '</td>';
                    
                    tableData += '<td>' + ((predmet.projektor == true) ? 'da' : 'ne') + '</td>';
                    tableData += '<td>' + ((predmet.tabla == true) ? 'da' : 'ne') + '</td>';


                   
                   
                    tableData += '<td>' + ((predmet.pametnaTabla == true) ? 'da' : 'ne') + '</td>';           
                    tableData += '<td>' + softveri + '</td>';
                    tableData += '<td><button type="button"  onclick="deletePredmet(\'' + predmet.id + '\')" class="btn btn-danger">Izbriši</button><br><br>' +
                   				 '<button type="button" id="izmeniPredmet' + predmet.id+'" value="'+predmet.id+ '" data-toggle="modal" data-target="#predmet" onclick="selektujSmerIzmenaPredmeta(\''+predmet.smer.naziv + ',' + predmet.id +'\');selektujSoftvereIzmenaPredmeta(\'' +softveri2+'\'); popuniFormuIzmeniPredmet(\'' + predmet.oznaka + '\');" class="btn btn-primary">Izmeni</button></td></tr>';

                    $("#tableBodyPredmeti").append(tableData);       
                });
             
             
              $('#predmeti').DataTable();
              $("#dodajEntitet_predmeti").click(function(){
                });
    
    },
    processData: false,
    type: 'GET',
    url: '/api/predmeti'
});

var predmet_global_id;

function selektujSmerIzmenaPredmeta(nazivSmeraIId){
	var rez = nazivSmeraIId.split(",");
	var nazivSmera = rez[0];
	predmet_global_id = rez[1];
	
	$("#smerSelect").empty();
    $.ajax({
        type: "GET",
        url: "/api/smerovi",
        success: function(smerovi){
            
            var selectSmer = document.getElementById("smerSelect");
            $.each(smerovi, function(i, smer){
                var optionSmer = document.createElement("OPTION");
                selectSmer.add(optionSmer);
                optionSmer.value = smer.oznaka;
                optionSmer.text = smer.naziv;
                if(smer.naziv == nazivSmera){
                	optionSmer.selected = true;
                }
            });
        }
    });
}
function selektujSoftvereIzmenaPredmeta(predmetSoftveri){
	var selectedSoftveri = predmetSoftveri.split(", ");

	$("#softveri-predmet").multiselect('select', selectedSoftveri);
  	
}

<!-- izmeni predmet -->
function popuniFormuIzmeniPredmet(oznaka){
	
	swal("Obaveštenje!", "Izmene će biti validne u rasporedima koji se prave nakon izmene!", "info");
	
	$("#predmetHeader").text("Izmena predmeta");
	$("#predmetSubmit").text("Izmeni predmet");
	
	$.ajax({
		type: "GET",
		url: '/api/predmet'+ oznaka,
		success: function(predmet){
			document.getElementById("nazivPredmeta").value = predmet.naziv;
		    document.getElementById("oznakaPredmeta").value = predmet.oznaka;
		    document.getElementById("opisPredmeta").value = predmet.opis;
		    document.getElementById("velicinaGrupe").value = predmet.velicinaGrupe;
		    document.getElementById("duzinaTermina").value = predmet.duzinaTermina; 
		    document.getElementById("brojTermina").value = predmet.brojTermina;
		    if(predmet.projektor){
		    	$('#projektorPredmet').prop('checked', true);	
		    }
		    if(predmet.tabla){
		    	$('#tablaPredmet').prop('checked', true);
		    }
		    if(predmet.pametnaTabla){
		    	$('#pametnaTablaPredmet').prop('checked', true);
		    }

		    if(predmet.opSistem == 'LINUX'){
		    	$('#linuxPredmet').prop('checked', true);
		    }
		    else if( predmet.opSistem == 'WINDOWS'){
		    	$('#windowsPredmet').prop('checked', true);
		    }
		    else{
		    	$('#obaOsPredmet').prop('checked', true);
		    }
		}
	});
}

function deletePredmet(id){
	$.ajax({
	    contentType: 'application/json',
	    dataType: 'json',
	    success: function(success){
			if (success){
				uspesnoSwal("Predmet uspešno obrisan.");
			}else{
				neuspesnoSwal("Greška prilikom brisanja");

			}
	    },
	    processData: false,
	    type: 'DELETE',
	    url: '/api/predmeti/'+ id
	});
	
}
function deleteUcionica(id){
	$.ajax({
	    contentType: 'application/json',
	    dataType: 'json',
	    success: function(success){
			if (success){
				uspesnoSwal("Učionica uspešno obrisana.");
			}else{
				neuspesnoSwal("Greška prilikom brisanja");

			}
	    },
	    processData: false,
	    type: 'DELETE',
	    url: '/api/ucionice/'+ id
	});
	
}
function deleteSmer(oznaka){
	$.ajax({
	    contentType: 'application/json',
	    dataType: 'json',
	    success: function(success){
			if (success){
				uspesnoSwal("Smer uspešno obrisan.");
			}else{
				neuspesnoSwal("Greška prilikom brisanja");

			}
	    },
	    error : function(data){
	    	alert(JSON.stringify(data));
	    	if (data.status == '500'){
	    		neuspesnoSwal("Prvo je potrebno izbrisati sve predmete za ovaj smer.");
	    	}
	    	
	    },
	    processData: false,
	    type: 'DELETE',
	    url: '/api/smerovi/'+ oznaka
	});
	
}
function deleteSoftver(oznaka){
	$.ajax({
	    contentType: 'application/json',
	    dataType: 'json',
	    success: function(success){
			if (success){
				uspesnoSwal("Softver uspešno obrisan.");
			}else{
				neuspesnoSwal("Greška prilikom brisanja");

			}
	    },
	    error : function(data){
	    	if (data.status == '500'){
	    		neuspesnoSwal("Prvo je potrebno izbrisati sve predmete i učionice koje zahtevaju ovaj softver");
	    	}
	    	
	    },
	    processData: false,
	    type: 'DELETE',
	    url: '/api/softveri/'+ oznaka
	});
	
}
$.ajax({
    contentType: 'application/json',
    dataType: 'json',
    success: function(smerovi){
               
              smerovi.forEach(function(smer) {
                    var tableData = '';
                    tableData += '<tr>';
                    tableData += '<td>'+ smer.oznaka +'</td>';
                    tableData += '<td>' + smer.naziv + '</td>';
                    tableData += '<td>' + smer.datum + '</td>';
                    tableData += '<td>' + smer.opis + '</td>';
                    tableData += '<td><button type="button"  onclick="deleteSmer(\'' + smer.oznaka + '\')" class="btn btn-danger">Izbriši</button><br><br>' +
                    	'<button type="button" id="izmeniSmer' + smer.id+'" value="\'' +smer.oznaka+ '\'" onclick="popuniFormuIzmeniSmer(\'' + smer.oznaka + ',' + smer.id + '\')" data-toggle="modal" data-target="#smer" class="btn btn-primary">Izmeni</button></td></tr>';
                   
                    $("#tableBodySmerovi").append(tableData);
                   
                   
                });
             
              $('#smerovi').DataTable();
              $("#dodajEntitet_smerovi").click(function(){
                    alert("dodavanje smerova");
                });
    },
    processData: false,
    type: 'GET',
    url: '/api/smerovi'
});

var smer_global_id;

function popuniFormuIzmeniSmer(oznakaSmeraIId){
	var rez = oznakaSmeraIId.split(",");
	var oznakaSmera = rez[0];
	smer_global_id = rez[1];
	
	swal("Obaveštenje!", "Izmene će biti validne u rasporedima koji se prave nakon izmene!", "info");
	
	$("#smerSubmit").text("Izmeni smer");
	$("#smerHeader").text("Izmena smera");
	
    $.ajax({
		type: "GET",
		url: '/api/smer'+ oznakaSmera,
		success: function(smer){
			
			document.getElementById("nazivSmera").value = smer.naziv;
			document.getElementById("oznakaSmera").value = smer.oznaka;
			
			var date = smer.datum;
			$('input[name=datumSmeraId]').val(date);
			
			document.getElementById("opisSmera").value = smer.opis;
		}
	});
}

$.ajax({
    contentType: 'application/json',
    dataType: 'json',
    success: function(ucionice){
               
              ucionice.forEach(function(ucionica) {
            	    // formatiraj softvere
	        	    var softs = ucionica.softveri;
	                var temp = "";
	                var temp2 = "";
	                if (softs.length > 0) {
	              	   softs.forEach(function(softver) {
	              	   	   temp = temp + softver.naziv + ", ";
	              	   	   temp2 = temp2 + softver.oznaka + ", ";
	              	    })       
	                 }
	              
	                var softveri = temp.substring(0, temp.length-2);
	                var softveri2 = temp2.substring(0, temp2.length-2);
           	  
                    var tableData = '';
                    tableData += '<tr>';
                    tableData += '<td>'+ ucionica.oznaka +'</td>';
                    tableData += '<td>' + ucionica.opis + '</td>';
                    tableData += '<td>' + ucionica.brojMesta + '</td>';
                    tableData += '<td>' + ((ucionica.projektor == true) ? 'da' : 'ne') + '</td>';
                    tableData += '<td>' + ((ucionica.tabla == true) ? 'da' : 'ne')  + '</td>';
                    tableData += '<td>' + ((ucionica.pametnaTabla == true) ? 'da' : 'ne')  + '</td>';
                    tableData += '<td>' + ucionica.opSistem + '</td>';
                    tableData += '<td>' + softveri + '</td>';
                    tableData += '<td><button type="button"  onclick="deleteUcionica(\'' +ucionica.id + '\')" class="btn btn-danger">Izbriši</button><br><br>'+
                    		 '<button type="button"  id="izmeniUcionicu' + ucionica.id+'" onclick="popuniFormuIzmeniUcionicu(\'' + ucionica.oznaka + ',' + ucionica.id +'\'); selektujSoftvereIzmenaUcionice(\'' +softveri2+'\');" data-toggle="modal" data-target="#ucionica" class="btn btn-primary">Izmeni</button></td></tr>';
                    $("#tableBodyUcionice").append(tableData);                 
                });
             
              $('#ucionice').DataTable();
              $("#dodajEntitet_ucionice").click(function(){
                    alert("dodavanje ucionica");
                });
    },
    processData: false,
    type: 'GET',
    url: '/api/ucionice'
});
function selektujSoftvereIzmenaUcionice(softveri){
	var selectedSoftveri = softveri.split(", ");

	$("#softveri-ucionica").multiselect('select', selectedSoftveri);
}

var ucionica_global_id;

function popuniFormuIzmeniUcionicu(oznakaUcioniceIId){
	var rez = oznakaUcioniceIId.split(",");
	var oznakaUcionice = rez[0];
	ucionica_global_id = rez[1];
	
	swal("Obaveštenje!", "Izmene će biti validne u rasporedima koji se prave nakon izmene!", "info");
	
	$("#ucionicaSubmit").text("Izmeni ucionicu");
	$("#ucionicaHeader").text("Izmena ucionice");
	
	$.ajax({
		type: "GET",
		url: '/api/ucionice/'+ oznakaUcionice,
		success: function(ucionica){
			document.getElementById("oznakaUcionice").value = ucionica.oznaka;
			document.getElementById("opisUcionice").value = ucionica.opis;
			document.getElementById("brojMesta").value = ucionica.brojMesta;
			if(ucionica.projektor){
		    	$('#projektorUcionica').prop('checked', true);	
		    }
		    if(ucionica.tabla){
		    	$('#tablaUcionica').prop('checked', true);
		    }
		    if(ucionica.pametnaTabla){
		    	$('#pametnaTablaUcionica').prop('checked', true);
		    }
		
		    if(ucionica.opSistem == 'LINUX'){
		    	$('#linuxUcionica').prop('checked', true);
		    }
		    else if( ucionica.opSistem == 'WINDOWS'){
		    	$('#windowsUcionica').prop('checked', true);
		    }
		    else{
		    	$('#obaUcionica').prop('checked', true);
		    }
		}
	});
}

$.ajax({
    contentType: 'application/json',
    dataType: 'json',
    success: function(softveri){
               
              softveri.forEach(function(softver) {
                    var tableData = '';
                    tableData += '<tr>';
                    tableData += '<td>'+ softver.oznaka +'</td>';
                    tableData += '<td>' + softver.naziv + '</td>';
                    tableData += '<td>' + softver.proizvodjac + '</td>';
                    tableData += '<td><a href="http://' + softver.sajt + '">' + softver.sajt + '</a></td>';
                    tableData += '<td>' + softver.godinaIzdavanja + '</td>';
                    tableData += '<td>' + softver.opis + '</td>';
                    tableData += '<td>' + softver.cena + '</td>';
                    tableData += '<td><button type="button"  onclick="deleteSoftver(\'' + softver.oznaka + '\')" class="btn btn-danger">Izbriši</button><br><br>'+
                    		 '<button type="button" id="izmeniSoftver' + softver.id+'" onclick="popuniFormuIzmeniSoftver(\'' + softver.oznaka +',' + softver.id + '\')" data-toggle="modal" data-target="#softver" class="btn btn-primary">Izmeni</button></td></tr>';
                    $("#tableBodySoftveri").append(tableData);
                 
                });
             
              $('#softveri').DataTable();
              $("#dodajEntitet_softveri").click(function(){
                    alert("dodavanje softvera");
                });
    },
    processData: false,
    type: 'GET',
    url: '/api/softveri'
});

var softver_global_id;

function popuniFormuIzmeniSoftver(oznakaSoftveraIId){
	var rez = oznakaSoftveraIId.split(",");
	var oznakaSoftvera = rez[0];
	softver_global_id = rez[1];
	
	swal("Obaveštenje!", "Izmene će biti validne u rasporedima koji se prave nakon izmene!", "info");
	
	$("#softverSubmit").text("Izmeni softver");
	$("#softverHeader").text("Izmena softvera");
	
    $.ajax({
		type: "GET",
		url: '/api/softver'+ oznakaSoftvera,
		success: function(softver){
			
			document.getElementById("nazivSoftvera").value = softver.naziv;
			document.getElementById("oznakaSoftvera").value = softver.oznaka;
			document.getElementById("opisSoftvera").value = softver.opis;
			document.getElementById("proizvodjacSoftvera").value = softver.proizvodjac;
			document.getElementById("sajtSoftvera").value = softver.sajt;
			document.getElementById("cenaSoftvera").value = softver.cena;
			document.getElementById("datumIzdavanja").value = softver.godinaIzdavanja;
	
		}
	});
}


function dodajEntitet(){
    alert("asd");
}
$(document).ready(function() {
 
} );

 
</script>
</html>